<!--
   ~ Copyright (c) 2014, WSO2 Inc. (http://wso2.com) All Rights Reserved.
   ~
   ~ Licensed under the Apache License, Version 2.0 (the "License");
   ~ you may not use this file except in compliance with the License.
   ~ You may obtain a copy of the License at
   ~
   ~ http://www.apache.org/licenses/LICENSE-2.0
   ~
   ~ Unless required by applicable law or agreed to in writing, software
   ~ distributed under the License is distributed on an "AS IS" BASIS,
   ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   ~ See the License for the specific language governing permissions and
   ~ limitations under the License.
   -->
<!-- secondary header - app bar -->


<div class="sidebar-wrapper sidebar-nav toggled nano" id="left-sidebar" data-side="left" data-width="200"
     data-offset-bottom="40">
    <div class="nano-content">


        <nav class="navigation">

            {{#with navigationBar}}
                {{#if noTypeSelected}}
                    <a href='{{tenantedUrl ""}}/pages/top-assets' id="all-assets"
                       class="{{#if navigationBar.landingPage}} active home top-item {{else}} home all-item  {{/if}}">
                        <span class="icon"><i class="fw fw-success"></i></span> <span
                            class="left-menu-item">{{t "All"}}</span>
                    </a>
                    {{#each types}}
                        <a href='{{tenantedUrl ""}}{{this.listingUrl}}' id="{{this.shortName}}"
                           class="{{ui.iconColor}} {{this.style}}">
                            <span class="icon"><i class="{{ui.icon}}"></i></span> <span
                                class="left-menu-item">{{pluralLabel}}</span>
                        </a>
                    {{/each}}
                {{else}}
                    {{#each types}}
                        {{#if this.selected}}
                            <a href='{{tenantedUrl ""}}{{this.listingUrl}}' id="{{this.shortName}}"
                               class="{{ui.iconColor}} {{this.style}}" data-selected="true">
                                <span class="icon"><i class="{{ui.icon}}"></i></span> <span
                                    class="left-menu-item">{{pluralLabel}}</span>
                            </a>
                        {{else}}
                            <a href='{{tenantedUrl ""}}{{this.listingUrl}}' id="{{this.shortName}}"
                               class="{{ui.iconColor}} {{this.style}}" style="display: none;">
                                <span class="icon"><i class="{{ui.icon}}"></i></span> <span
                                    class="left-menu-item">{{pluralLabel}}</span>
                            </a>
                        {{/if}}
                    {{/each}}
                    <a href='{{tenantedUrl ""}}/pages/top-assets' id="all-assets"
                       class="{{#if navigationBar.landingPage}} active home top-item {{else}} home all-item  {{/if}}"
                       style="display: none">
                        <span class="icon"><i class="fw fw-success"></i></span> <span
                            class="left-menu-item">{{t "All"}}</span>
                    </a>
                    <a class="assets-show-more"><i class="fw fw-down"></i> More</a>
                    <a class="assets-show-less" style="display: none;"><i class="fw fw-up"></i> Less</a>
                {{/if}}
            {{/with}}
        </nav>


        <div id="taxonomy-section" style="display: none;">

            <button type="button" class="btn btn-secondary pull-right btn-expand-taxonomy-toggle" id="maximize-taxonomy"
                    data-toggle="tooltip" data-placement="left" title="Expand Section">
                <i class="fw fw-expand"></i>
            </button>
            <nav class="taxonomy">
                <h1>Filter by</h1>

                <ul id="accordion1" class="nav nav-stacked">
                </ul>

            </nav>
        </div>

        <div class="refine" id="categorization-div">
            {{> categorization-entry .}}
        </div>

        {{#if tags}}
            <div class="tags-wrapper">
                <div class="tag-title"> Tags</div>
                <div class="tag-content">
                    {{#each tags}}
                        {{#if this.selected}}
                            {{#if ../../assetCategoryDetails.hasCategories}}
                                <a href='{{tenantedUrl ""}}{{this.searchPage}}?q="category":"{{../../assetCategoryDetails.selectedCategory}}","tags":"{{this.value}}"'><span
                                        class="text-muted">{{this.value}}</span></a>
                            {{else}}
                                <a href='{{tenantedUrl ""}}{{this.searchPage}}?q="tags":"{{this.value}}"'><span
                                        class="text-muted">{{this.value}}</span></a>
                            {{/if}}
                        {{else}}
                            {{#if ../../assetCategoryDetails.hasCategories}}
                                <a href='{{tenantedUrl ""}}{{this.searchPage}}?q="category":"{{../../../assetCategoryDetails.selectedCategory}}","tags":"{{this.value}}"'><span>{{this.value}}</span></a>
                            {{else}}
                                <a href='{{tenantedUrl ""}}{{this.searchPage}}?q="tags":"{{this.value}}"'><span>{{this.value}}</span></a>
                            {{/if}}
                        {{/if}}
                    {{/each}}
                </div>
            </div>
        {{/if}}

    </div>

</div>

<input id="categorization-query" type="hidden" value=""/>
<div class="container-fluid navigation-container">
    <!-- secondary header - app bar -->
    <div id="nav" class="es-row row wr-app-bar">
        <div class="col-md-12 wr-action-container">
            <div id="the-basics" class="es-input-group input-group input-wrap">
                <div class="search-wrapper" style="float:left;width:80%;position:relative;left:0px;">

                    {{#if rxt.pluralLabel}}
                        <input id="search" type="text" class="typeahead es-form-control form-control"
                               placeholder="Search in {{rxt.pluralLabel}}" value="{{searchQuery}}">
                    {{else}}
                        <input id="search" type="text" class="typeahead es-form-control form-control"
                               placeholder="Search in all asset types" value="{{searchQuery}}">
                    {{/if}}
                    <div class="es-input-group-btn input-group-btn">
                        <button class="btn btn-default wrap-input-right" type="button" title="{{t "Search"}}"
                                id="search-button">
                            <i class="fw fw-search" aria-hidden="true"></i>
                        </button>
                        {{>search-options-popover .}}
                    </div>


                </div>
            </div>

            <div class="col-sm-3 col-md-5 col-lg-3 top-menu-right-custom right">
                <div>
                    {{#hasAppPermission . key="APP_MYITEMS" username=cuser.username tenantId=cuser.tenantId}}
                        <a href="{{url "/pages/my-items"}}" class="bookmark-link"
                           style="display: none;">{{t "My bookmarks "}}<i class="fw fw-store fw-inverse fw-lg"></i></a>
                    {{/hasAppPermission}}
                    <ul class="es-nav nav es-navbar-nav navbar-nav navbar-right">
                        {{#if isSidebarEnabled}}
                            <li>
                                {{#hasAppPermission . key="GREG_COMMUNITY_FEATURES" username=cuser.username tenantId=cuser.tenantId}}
                                    {{#unless isContentType}}  <!-- remove options tab for content type artifacts-->
                                        <a href="javascript:void(0)" onclick="toggleSidePanel('options',this)"
                                           class="cu-btn wr-side-panel-toggle-btn">
                                    <span class="fw-stack-md options">
                                        <i class="fw fw-left-arrow fw-stack-1-5x"></i>
                                    </span>
                                            Options
                                        </a>
                                    {{/unless}}
                                {{/hasAppPermission}}
                            </li>
                        {{/if}}
                        {{#if isNotificationbarEnabled}}
                            <li>
                                <a href="javascript:void(0)" onclick="toggleSidePanel('notifications',this)"
                                   class="cu-btn wr-side-panel-toggle-btn wr-notification-toggle-btn">
                                <span class="fw-stack-md notifications">
                                    <i class="fw fw-bell fw-stack-1-5x"></i>
                                </span>
                                    <span class="wr-notification-bubble"
                                          id="notificationCount">{{notificationsCount.count}}</span>
                                </a>

                            </li>
                        {{/if}}
                    </ul>
                </div>
            </div>


        </div>
    </div>
    <!-- secondary header - app bar -->
</div>